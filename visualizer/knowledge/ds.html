<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>知识点库 — 数据结构</title>
  <link rel="stylesheet" href="../assets/css/home.css">
  <link rel="stylesheet" href="../assets/css/theme.css">
  <style>
    .content-section { margin: 28px 10px; }
    .pill { display:inline-flex; align-items:center; padding:6px 10px; border-radius:16px; border:1px solid #e6eaf2; background:#f8f9fa; margin:4px; font-size:13px; }
    .pill:hover { background:#eef6ff; border-color:#00c6ff; color:#0072ff; }
    .k-item { background:#fff; border:1px solid #e6eaf2; border-radius:12px; padding:16px; margin:12px 0; }
    .k-title { font-weight:600; margin-bottom:8px; }
    .k-body { line-height:1.7; }
    .k-nav { display:flex; flex-wrap:wrap; gap:6px; margin:8px 0 16px 0; }
    .k-link { padding:6px 10px; border:1px solid #e6eaf2; border-radius:8px; background:#f8f9fa; }
  </style>
</head>
<body>
  <div class="home-container">
    <header class="header">
      <a href="index.html" class="back-link" style="position:absolute;left:20px;top:20px;">← 返回上一级</a>
      <h1>知识点库 — 数据结构</h1>
      <p class="subtitle">按主题浏览数据结构知识点</p>
    </header>
    <main class="main-content">
      <section class="content-section">
        <div class="k-nav" id="ds-files"></div>
        <div id="ds-cats"></div>
        <div class="k-item"><div class="k-title">暂未整理</div><div class="k-body">该学科的其他知识点后续补充。</div></div>
      </section>
    </main>
    <footer class="footer"><p>知识点库 © 2024</p></footer>
  </div>
    <script>
      (function(){
        function qs(key){ var s=location.search.replace(/^\?/,'').split('&').filter(Boolean).map(function(p){ var i=p.indexOf('='); return [decodeURIComponent(p.slice(0,i)), decodeURIComponent(p.slice(i+1))]; }); var o={}; s.forEach(function(kv){ o[kv[0]]=kv[1]; }); return o[key]; }
        function esc(s){ return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }
        var ref = qs('ref'); if(ref){ var a=document.createElement('a'); a.className='floating-ref-btn'; a.textContent='← 返回刷题'; var href=ref; if(!/^https?:\/\//i.test(href) && !/^\//.test(href)){ href='../'+href.replace(/^\.\/?/,''); } a.href=href; document.body.appendChild(a); }

        var box=document.getElementById('ds-files');
        fetch('/_knowledge_ds.json').then(function(r){ if(!r.ok) throw new Error('x'); return r.json(); }).then(function(list){
          var html = (list||[]).map(function(it){
            var nm = String(it.name||''); var title = it.title || nm; var href = 'md.html?file='+ encodeURIComponent('ds/'+nm) + '&from=ds' + (ref?('&ref='+encodeURIComponent(ref)):'');
            return '<a class="k-link" href="'+href+'">'+ esc(title) +'</a>';
          }).join('');
          box.innerHTML = html || '';
        }).catch(function(){ box.innerHTML = ''; });

        var cats=[
          { name:'查找算法', sub:'查找算法' },
          { name:'逻辑结构相关', sub:'逻辑结构相关' },
          { name:'排序算法', sub:'排序算法' },
          { name:'其他', sub:'其他' }
        ];
        var catsBox=document.getElementById('ds-cats');
        Promise.all(cats.map(function(c){
          var dir='knowledge/ds/'+c.sub;
          return fetch('/_ls.json?dir='+ encodeURIComponent(dir)).then(function(r){ if(!r.ok) throw new Error('x'); return r.json(); }).then(function(list){ return { cat:c.name, sub:c.sub, list:list||[] }; }).catch(function(){ return { cat:c.name, sub:c.sub, list:[] }; });
        })).then(function(results){
          var html = results.map(function(grp){
            var links = grp.list.map(function(it){ var nm=String(it.name||''); var title=it.title||nm; var href='md.html?file='+ encodeURIComponent('ds/'+grp.sub+'/'+nm) + '&from=ds' + (ref?('&ref='+encodeURIComponent(ref)):''); return '<a class="k-link" href="'+href+'">'+ esc(title) +'</a>'; }).join('');
            return '<div class="k-item"><div class="k-title">'+ esc(grp.cat) +'</div><div class="k-nav">'+ (links||'<span class="pill">暂无内容</span>') +'</div></div>';
          }).join('');
          catsBox.innerHTML = html;
        });
      })();
    </script>
  <script src="../assets/js/theme.js"></script>
</body>
</html>